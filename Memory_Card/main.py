# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤
from menu_window import *
from main_window import *

from random import choice, shuffle #–≤–∏–±. —Ä–∞–Ω–¥. –µ–ª.–∑—ñ —Å–ø–∏—Å–∫—É \ –ø–µ—Ä–µ–º—ñ—à—É—î –µ–ª–µ–º–µ–Ω—Ç–∏ —Å–ø–∏—Å–∫—É
from time import sleep

# CSS - —Å—Ç–∏–ª—ñ
wins = [main_win, menu_win]
for win in wins:
    win.setStyleSheet('''
                      color: #00151c;
                      background-color: #c1fbef;
                      border: 4px double #000000;
                      font-size: 17px;
                      font-family: Bold ;
                      border-radius: 20px;
                      text-align: center;

                      

                      
                    
                      
                         
                         ''')
lb_Result.setStyleSheet('margin: 20px;')

                        



# –∫–ª–∞—Å –ü–∏—Ç–∞–Ω–Ω—è 
class Question():

    def __init__(self, question, answer, wrong_answer1, wrong_answer2, wrong_answer3):
        self.question = question             # –ø–∏—Ç–∞–Ω–Ω—è
        self.answer = answer                 # –≤—ñ–¥–ø–æ–≤—ñ–¥—å
        self.wrong_answer1 = wrong_answer1   # –Ω–µ–ø—Ä.–≤—ñ–¥–ø.1
        self.wrong_answer2 = wrong_answer2
        self.wrong_answer3 = wrong_answer3

        self.actual = True  # —á–∏ –∞–∫—Ç—É–∞–ª—å–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è
        self.attempts = 0   # –∫—ñ–ª—å–∫. —Å–ø—Ä–æ–±
        self.correct = 0    # –∫—ñ–ª—å–∫. –ø—Ä–∞–≤.–≤—ñ–¥–ø.

    def got_right(self):
        ''' –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –æ—Ç—Ä–∏–º–∞–≤—à–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å'''
        self.attempts += 1
        self.correct += 1

    def got_wrong(self):
        ''' –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –æ—Ç—Ä–∏–º–∞–≤—à–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å'''
        self.attempts += 1

# –ø–∏—Ç–∞–Ω–Ω—è
q1 = Question('–Ø–∫–∏–π –≥—Ä–µ—Ü—å–∫–∏–π –±–æ–≥ —î –≥–æ–ª–æ–≤–Ω–∏–º –±–æ–≥–æ–º –Ω–∞ –û–ª—ñ–º–ø—ñ?üëë','–ó–µ–≤—Å','–ü–æ—Å–µ–π–¥–æ–Ω','–ê—Ä–µ—Å','–ê—ó–¥')
q2 = Question('–Ø–∫–∞ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∞ –±–æ–≥–∏–Ω—è —î –±–æ–≥–∏–Ω–µ—é –ª—é–±–æ–≤—ñ —ñ –∫—Ä–∞—Å–∏?‚ù§Ô∏è','–§—Ä–µ–π—è','–•–µ–ª—å','–°–∏—Ñ','–Ü–¥—É–Ω')
q3 = Question('–Ø–∫–∏–π –≥—Ä–µ—Ü—å–∫–∏–π –±–æ–≥ —î –±–æ–≥–æ–º –º–æ—Ä—è?üåäÔ∏è','–ü–æ—Å–µ–π–¥–æ–Ω','–ì–µ—Ñ–µ—Å—Ç','–ó–µ–≤—Å','–ê—Ä–µ—Å')
q4 = Question('–Ø–∫–∏–π —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∏–π –±–æ–≥ –≤—ñ–¥–æ–º–∏–π —Å–≤–æ—î—é —Å–∏–ª–æ—é —ñ –º–æ–ª–æ—Ç–æ–º?üî®Ô∏è‚ö°Ô∏è','–¢–æ—Ä','–§—Ä–µ–π—Ä','–õ–æ–∫—ñ','–û–¥—ñ–Ω')
q5 = Question('–Ø–∫–∞ –≥—Ä–µ—Ü—å–∫–∞ –±–æ–≥–∏–Ω—è —î –±–æ–≥–∏–Ω–µ—é –º—É–¥—Ä–æ—Å—Ç—ñ —ñ –≤—ñ–π–Ω–∏?üß†','–ê—Ñ—ñ–Ω–∞','–ê—Ñ—Ä–æ–¥—ñ—Ç–∞','–ì–µ—Ä–∞','–ê—Ä—Ç–µ–º—ñ–¥–∞')
q6 = Question('–Ø–∫–∞ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∞ —ñ—Å—Ç–æ—Ç–∞ —î –º–æ–≥—É—Ç–Ω—ñ–º –≤–æ–≤–∫–æ–º, —è–∫–∏–π –±—É–¥–µ –±–∏—Ç–∏—Å—å –Ω–∞ –†–∞–≥–Ω–∞—Ä–æ–∫—É?üê∫','–§–µ–Ω—Ä—ñ—Ä','–ô–æ—Ä–º—É–Ω–≥–∞–Ω–¥','–°—É—Ä—Ç','–õ–æ–∫—ñ')
q7 = Question('–Ø–∫–∏–π —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∏–π –±–æ–≥ —î –±–æ–≥–æ–º –æ–±–º–∞–Ω—É —ñ —Ö–∏—Ç—Ä–æ—â—ñ–≤?üòà','–õ–æ–∫—ñ','–û–¥—ñ–Ω','–¢–æ—Ä','–§—Ä–µ–π—Ä')
q8 = Question('–Ø–∫–∏–π –≥—Ä–µ—Ü—å–∫–∏–π –≥–µ—Ä–æ–π –ø–µ—Ä–µ–º—ñ–≥ –ú—ñ–Ω–æ—Ç–∞–≤—Ä–∞?üëä','–¢–µ—Å–µ–π','–ì–µ—Ä–∞–∫–ª','–ü–µ—Ä—Å–µ–π','–ê—Ö—ñ–ª–ª–µ—Å')
q9 = Question('–Ø–∫–∞ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∞ —ñ—Å—Ç–æ—Ç–∞ —î –≤–µ–ª–∏—á–µ–∑–Ω–∏–º –∑–º—ñ—î–º, —â–æ –æ–±–≤–∏–≤–∞—î —Å–≤—ñ—Ç?üêç','–ô–æ—Ä–º—É–Ω–≥–∞–Ω–¥','–§–µ–Ω—Ä—ñ—Ä','–°—É—Ä—Ç','–õ–æ–∫—ñ')
q10 = Question('–Ø–∫–∏–π –≥—Ä–µ—Ü—å–∫–∏–π –≥–µ—Ä–æ–π –≤—ñ–¥–æ–º–∏–π —Å–≤–æ—î—é —Å–∏–ª–æ—é —ñ 12 –ø–æ–¥–≤–∏–≥–∞–º–∏?üí™','–ì–µ—Ä–∞–∫–ª','–ü–µ—Ä—Å–µ–π','–¢–µ—Å–µ–π','–ê—Ö—ñ–ª–ª–µ—Å')
q11 = Question('–Ø–∫–∞ —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∞ –±–æ–≥–∏–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø–ª–æ–¥–æ–≤–∏—Ç—ñ—Å—Ç—å —ñ —Ä–æ–¥—é—á—ñ—Å—Ç—å?üå∑ üåπ','–§—Ä–µ–π—è','–°–∏—Ñ','–Ü–¥—É–Ω','–•–µ–ª—å')
q12 = Question('–Ø–∫–∏–π –≥—Ä–µ—Ü—å–∫–∏–π –±–æ–≥ —î –ø–æ–∫—Ä–æ–≤–∏—Ç–µ–ª–µ–º —Å–æ–Ω—Ü—è —ñ –º—É–∑–∏–∫–∏?üåûüéµ','–ê–ø–æ–ª–ª–æ–Ω','–ü–æ—Å–µ–π–¥–æ–Ω','–ê–ø–æ–ª–æ–Ω','–ó–µ–≤—Å')
q13 = Question('–Ø–∫–∏–π —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∏–π –±–æ–≥ —î –±–∞—Ç—å–∫–æ–º –¢–æ—Ä–∞?üë®','–û–¥—ñ–Ω','–õ–æ–∫—ñ','–§—Ä–µ–π—Ä','–¢–æ—Ä')
q14 = Question('–Ø–∫–∞ –≥—Ä–µ—Ü—å–∫–∞ –±–æ–≥–∏–Ω—è —î –±–æ–≥–∏–Ω–µ—é –ø–æ–ª—é–≤–∞–Ω–Ω—è —ñ –¥–∏–∫–∏—Ö —Ç–≤–∞—Ä–∏–Ω?üêóüèπ','–ê—Ä—Ç–µ–º—ñ–¥–∞','–ê—Ñ—Ä–æ–¥—ñ—Ç–∞','–ê—Ñ—ñ–Ω–∞','–î–µ–º–µ—Ç—Ä–∞')
q15 = Question('–Ø–∫–∏–π —Å–∫–∞–Ω–¥–∏–Ω–∞–≤—Å—å–∫–∏–π –±–æ–≥ —î –±–æ–≥–æ–º –≤—ñ–π–Ω–∏ —ñ –º—É–¥—Ä–æ—Å—Ç—ñ?‚öîÔ∏è','–û–¥—ñ–Ω','–¢–æ—Ä','–õ–æ–∫—ñ','–§—Ä–µ–π—Ä')

# —Å–ø–∏—Å–æ–∫ –∑ –ø–µ—Ä–µ–º–∏–∫–∞—á—ñ–≤ –∫–Ω–æ–ø–æ–∫ —Ç–∞ –ø–∏—Ç–∞–Ω—å
radio_list = [rbtn_1, rbtn_2, rbtn_3, rbtn_4]
questions = [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10, q11, q12, q13, q14, q15]

# --------------------------------------
#    –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
# --------------------------------------

#       (—Ñ—É–Ω–∫—Ü—ñ—è —â–æ –æ–±–∏—Ä–∞—î –≤–∏–ø–∞–¥–∫–æ–≤–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –∑—ñ —Å–ø–∏—Å–∫—É —Ç–∞ –ø–æ–∫–∞–∑—É—î –π–æ–≥–æ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ)
def new_question():
    global cur_question
    cur_question = choice(questions)                   #–≤–∏–±–∏—Ä–∞—î —Ä–∞–Ω–¥–æ–º–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è

    lb_Question.setText(cur_question.question)         #–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Ç–µ–∫—Å—Ç(–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è) –Ω–∞ –≤—ñ–¥–∂–µ—Ç–∏
    lb_Correct.setText(cur_question.answer)

    shuffle(radio_list)                                 #–ø–µ—Ä–µ–º—ñ—à—É—î –∫–Ω–æ–ø–∫–∏(—â–æ–± –Ω–µ –Ω–∞ 1 —à—ñ–π –±—É–ª–∞ –∑–∞–≤–∂–¥–∏ –ø—Ä–∞–≤.–≤—ñ–¥–ø–æ–≤.)- –∑–º—ñ–Ω—é—é—á–∏ –ø–æ–∑–∏—Ü—ñ—é –≤ —Å–ø–∏—Å–∫—É
    
    radio_list[0].setText(cur_question.wrong_answer1)   #—Ä–æ–∑–º—ñ—à—é—î–º–æ –Ω–∞ –Ω–∏—Ö –∑–Ω–æ–≤—É –ø–∏—Ç–∞–Ω–Ω—è
    radio_list[1].setText(cur_question.wrong_answer2)
    radio_list[2].setText(cur_question.wrong_answer3)   #–≤ –Ω–æ–≤–æ–º—É –ø–æ—Ä—è–¥–∫—É
    radio_list[3].setText(cur_question.answer)


#       (—Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ)
def check_result():
    for ans_btn in radio_list:
        if ans_btn.isChecked():                         # –≤–∏–±—Ä–∞–Ω–∏–π –≤—ñ—Ä–Ω–∏—Ö –ø–µ—Ä–µ–º–∏–∫–∞—á?
            if ans_btn.text() == lb_Correct.text():     # —á–∏ –∑–±—ñ–≥–∞—î—Ç—å—Å—è —Ç–µ–∫—Å—Ç –Ω–∞ –≤–∏–±—Ä.–∫–ø–æ–Ω—Ü—ñ —Ç–∞ —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤.–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ?
                cur_question.got_right()                # –∑–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫.—Å–ø—Ä–æ–± +1
                lb_Result.setText('–ü—Ä–∞–≤–∏–ª—å–Ω–æ!')
                update_statistics()        
                break
    else:
        cur_question.got_wrong()                 #—è–∫—â–æ –Ω–µ –≤–∏–±—Ä.–ø—Ä–∞–≤.–≤—ñ–¥–ø.
        lb_Result.setText('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! :)')     #–∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–¥–ø–∏—Å –Ω–∞ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
        update_statistics()

#       (—Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –í—ñ–¥–ø–æ—á–∏—Ç–∏)
def rest():
    main_win.hide()                 # –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω–∏–π –≤—ñ–¥–∂–µ—Ç    
    n = box_Minutes.value() * 60    # –±–µ—Ä–µ –∑–Ω–∞—á.–≤—ñ–¥ –∫–æ—Ä—Å–∏—Ç–≤–∞—á–∞ —ñ –º–Ω–æ–∂–∏—Ç—å –Ω–∞ –∫—ñ–ª—å–∫. —Å–µ–∫—É–Ω–¥
    sleep(n)                        # —Å–ø–∏—Ç—å
    main_win.show()                 # –ø–æ—Ç—ñ–º –∑–Ω–æ–≤—É –ø–æ–∫–∞–∑—É—î


# -----------------------------------------
#      –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–∞–Ω–µ–ª—ñ –º–µ–Ω—é 
# ----------------------------------------

def show_menu():      
    menu_win.show()
    main_win.hide()

def back_menu():
    menu_win.hide()
    main_win.show()

def clear():
    txt_Question.clear()
    txt_Answer.clear()
    txt_Wrong1.clear()
    txt_Wrong2.clear()
    txt_Wrong3.clear()

def add_question():
    newq = Question(txt_Question.text(), txt_Answer.text(), txt_Wrong1.text(), txt_Wrong2.text(), txt_Wrong3.text())
    questions.append(newq)
    clear()

#   —Ñ—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏ –µ–∫—Ä–∞–Ω—ñ–≤
def switch_screen():
    if btn_OK.text() == '–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏':
        check_result()   #
        RadioGroupBox.hide()
        AnsGroupBox.show()
        btn_OK.setText('–ù–∞—Å—Ç—É–ø–Ω–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è')
    else:
        new_question() #
        RadioGroupBox.show()
        AnsGroupBox.hide()
        btn_OK.setText('–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏')
                                            # —Å–∫–∏–Ω—É—Ç–∏ –≤–∏–±—Ä–∞–Ω—É —Ä–∞–¥—ñ–æ-–∫–Ω–æ–ø–∫—É
        RadioGroup.setExclusive(False) # –∑–Ω—è–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ —Å–∫–∏–Ω—É—Ç–∏ –≤–∏–±—ñ—Ä —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∏
        rbtn_1.setChecked(False)
        rbtn_2.setChecked(False)
        rbtn_3.setChecked(False)
        rbtn_4.setChecked(False)
        RadioGroup.setExclusive(True) # –ø–æ–≤–µ—Ä–Ω—É–ª–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è, —Ç–µ–ø–µ—Ä –ª–∏—à–µ –æ–¥–Ω–∞ —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—Ä–∞–Ω–∞

#   —Ñ—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª—é—î –ø–æ–∫–∞–∑–Ω–∏—Ü–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
def update_statistics():
    total_attempts = sum(q.attempts for q in questions)
    total_correct = sum(q.correct for q in questions)
    lbl_statistics.setText(f"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: {total_correct}\n–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±: {total_attempts}")



# ----------------------------------------------------------
#  –ü—ñ–∫—é—á–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó - –¥–æ –∫–Ω–æ–ø–æ–∫
# ----------------------------------------------------------

# - –∑–≥–µ–Ω–µ–≤—É–≤–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è –∑ —Å–∞–º–æ–≥–æ –ø–æ—á–∞—Ç–∫—É
new_question()

btn_Menu.clicked.connect(show_menu)
btn_Sleep.clicked.connect(rest)
btn_OK.clicked.connect(switch_screen)

btn_add_q.clicked.connect(add_question)
btn_clear.clicked.connect(clear)
btn_back.clicked.connect(back_menu)










# - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—ñ–∫–æ–Ω
main_win.show()
app.exec_()
